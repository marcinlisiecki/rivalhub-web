<section class="wrapper" *ngIf="event">
  <section class="main">
    <app-go-back-button></app-go-back-button>

    <section *ngIf="event">
      <h1 class="event-title">
        {{ event.name }}
        <p-button
          *ngIf="canJoin"
          (click)="joinEvent()"
          styleClass="p-button-secondary p-button-outlined p-button-sm"
          iconPos="left"
          icon="pi pi-plus"
          label="{{ 'event.joinEvent' | translate }}"
        ></p-button>
        <p-button
          *ngIf="canEdit && event.host !== loggedInUserId"
          (click)="leaveEvent()"
          styleClass="p-button-danger p-button-outlined p-button-sm"
          iconPos="left"
          label="{{ 'event.leaveEvent' | translate }}"
        ></p-button>
      </h1>

      <div class="tags">
        <p-tag
          severity="info"
          value="{{ categoryTypeToLabel(eventType) | translate }}"
        ></p-tag>
        <p-tag
          [severity]="event.eventPublic ? 'success' : 'danger'"
          value="{{
            (event.eventPublic ? 'event.publicLabel' : 'event.privateLabel')
              | translate
          }}"
        ></p-tag>
      </div>

      <p class="description">
        {{ event.description ?? ('event.noDescription' | translate) }}
      </p>
    </section>

    <section>
      <app-view-ping-pong-matches
        *ngIf="eventType === EventType.PING_PONG"
        [matches]="getPingPongMatches()"
      ></app-view-ping-pong-matches>

      <app-view-table-football-matches
        *ngIf="eventType === EventType.TABLE_FOOTBALL"
        [matches]="getTableFootballMatches()"
      >
      </app-view-table-football-matches>

      <app-view-pull-ups-matches
        *ngIf="eventType === EventType.PULL_UPS"
        [matches]="getPullUpsMatches()"
      >
      </app-view-pull-ups-matches>
    </section>

    <section class="buttons" *ngIf="canEdit">
      <a
        [routerLink]="[
          '/organizations',
          organizationId,
          'events',
          eventId,
          'results',
          { type: eventType }
        ]"
      >
        <p-button>{{ 'event.addResults' | translate }} </p-button>
      </a>
    </section>
  </section>

  <section class="participants">
    <h2 class="section-title">{{ 'event.participants' | translate }}</h2>
    <p-confirmPopup></p-confirmPopup>

    <div class="users">
      <div class="user" *ngFor="let user of participants">
        <a routerLink="/profiles/{{ user.id }}" class="user-data">
          <app-avatar class="user-avatar" [user]="user"></app-avatar>
          <p>{{ user.name }}</p>
        </a>

        <p-button
          *ngIf="user.id !== event.host && loggedInUserId === event.host"
          icon="pi pi-times-circle"
          styleClass="p-button-danger p-button-text p-button-sm"
          (click)="onRemoveUser($event, user)"
        ></p-button>
      </div>
    </div>
  </section>
</section>
